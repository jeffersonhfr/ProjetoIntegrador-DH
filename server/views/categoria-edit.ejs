<%- include('./partials/head') %>
  <%- include('./partials/header') %>
    <div class="container">
      <form action="" method="POST" class='formCategoria' enctype="multipart/form-data">
        <article class='addPacote-TitleContainer'>
          <h1 class='addPacote-TitleContainer'>Editar Categoria</h1>
        </article>

        <div class="category-content-box">
          <div class="category-box1">
            <h2 class='addPacote-TitleContainer'>Preview</h2>
            <ul class=" Main ViagensTematicas itemsTema">
              <li class="Tema">
                <div class="Container Img" id="imgPreview" style="background-image:url(/assets/img/categoria/<%=categoria[0].imagemCategoria%>">
                  <img id="output" />
                  <a id="cardpreview" href="#" style="background-color: <%=categoria[0].corCategoria%>aa">
                    <h1 id="h1Preview">
                      <%=categoria[0].nomeCategoria%>
                    </h1>
                  </a>
                </div>
              </li>
            </ul>
          </div>

          <div class="category-box2">
            <h2 class='addPacote-TitleContainer'>Adicione/edite a imagem da categoria</h2>
            <nav class='addPacote-ImgContainer' style='position: relative;'>
              <ul class='addPacote-ImgContainer__Img-list'>
                <input name="imgCategoria" type='file' onchange="loadFile(event)" accept='.jpg' />
              </ul>
            </nav>

            <h2 class='addPacote-TitleContainer'>Edite as informações da categoria</h2>
            <ul class="Pacote-Propriedades">
              <li class="Pacote-Propriedades__Item Pacote-Propriedades__Item--addpack">
                <label>Nome da Categoria</label>
                <input type="text" name="nomeCategoria" id="nomeCategoria" onkeyup="mudarTexto()" value="<%=categoria[0].nomeCategoria%>" placeholder="Nome Categoria">
              </li>
              <li class="Pacote-Propriedades__Item Pacote-Propriedades__Item--addpack">
                <label>Cor da Categoria</label>
                <input onchange="trocarCor()" type="color" name="corCategoria" id="corCategoria" value="<%=categoria[0].corCategoria%>" style="width: 100px; height: 100px;">
              </li>
            </ul>
          </div>
        </div>

        <button type="submit" title="Criar Pacote" class="Pacote__Button-Comprar">Editar</button>


      </form>
    </div>

    <script>
      const cardpreview = document.querySelector('#cardpreview');
      function trocarCor() {
        let colorPicker = document.querySelector('#corCategoria').value;
        let corSelecionada = colorPicker + 'aa';
        cardpreview.style.background = corSelecionada
      }

      const h1Preview = document.querySelector('#h1Preview');
      const nomeCategoria = document.querySelector('#nomeCategoria')
      function mudarTexto() { h1Preview.innerText = nomeCategoria.value; }

      var loadFile = function (event) {
        var output = document.getElementById('imgPreview');
        output = URL.createObjectURL(event.target.files[0]);
        console.log(output)

        document.getElementById('imgPreview').setAttribute("style", "background-image: url(" + output + ")");

      };
    </script>

    <%- include('./partials/footer') %>